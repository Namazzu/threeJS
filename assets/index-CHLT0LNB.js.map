{"version":3,"mappings":";ozDAEMA,EAAW,CACf,gBAAiB,CACf,KAAM,gBACN,YAAa,wDACb,MAAO,6BACP,MAAO,mCACP,KAAM,IAAKC,EAAA,IAAC,OAAO,6BAA6B,yBACpD,EACE,UAAW,CACT,KAAM,YACN,YAAa,mDACb,MAAO,yBACP,MAAO,+BACP,KAAM,UAAM,OAAO,yBAAyB,yBAChD,EACE,mBAAoB,CAClB,KAAM,mBACN,YAAa,gDACb,KAAM,IAAKA,EAAA,IAAC,OAAO,gCAAgC,yBACvD,CACA,EAGMC,EAAO,SAAS,eAAe,MAAM,EACrCC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAa,SAAS,eAAe,aAAa,EAClDC,EAAc,SAAS,eAAe,cAAc,EAK1D,IAAIC,EAAiB,KAKrB,MAAMC,EAAY,IAAM,CACtBF,EAAY,UAAY,GAExB,SAAW,CAACG,EAAKC,CAAO,IAAK,OAAO,QAAQT,CAAQ,EAAG,CACrD,MAAMU,EAAO,SAAS,cAAc,GAAG,EAoBvC,GAnBAA,EAAK,KAAO,YAAYF,CAAG,GAC3BE,EAAK,UAAY,eACjBA,EAAK,iBAAiB,QAAUC,GAAM,CACpCA,EAAE,eAAc,EAChBC,EAAYJ,CAAG,CACjB,CAAC,EAEDE,EAAK,UAAY;AAAA;AAAA,UAEXD,EAAQ,MAAQ,aAAaA,EAAQ,KAAK,UAAUA,EAAQ,IAAI,OAAS,EAAE;AAAA,UAC3EA,EAAQ,MAAQ,eAAeA,EAAQ,KAAK,mDAAqD,EAAE;AAAA;AAAA;AAAA,cAG/FA,EAAQ,IAAI;AAAA,aACbA,EAAQ,WAAW;AAAA;AAAA,MAKxBA,EAAQ,MAAO,CACjB,MAAMI,EAAQH,EAAK,cAAc,OAAO,EACxCA,EAAK,iBAAiB,aAAc,IAAM,CACxCG,EAAM,YAAc,EACpBA,EAAM,KAAI,CACZ,CAAC,EACDH,EAAK,iBAAiB,aAAc,IAAM,CACxCG,EAAM,MAAK,CACb,CAAC,CACH,CAEAR,EAAY,YAAYK,CAAI,CAC9B,CACF,EAEMI,EAAsB,IAAM,CAC5BR,IACFA,EAAc,EACdA,EAAiB,KAErB,EAGA,eAAeM,EAAYJ,EAAK,CAC9BM,EAAmB,EAGnB,OAAO,QAAQ,UAAU,GAAI,GAAI,YAAYN,CAAG,EAAE,EAGlDN,EAAK,MAAM,QAAU,OACrBC,EAAO,MAAM,QAAU,QACvBC,EAAW,MAAM,QAAU,OAI3BE,GADe,MAAMN,EAASQ,CAAG,EAAE,KAAI,GACf,QAAQL,CAAM,CACxC,CAGA,SAASY,GAAW,CAClBD,EAAmB,EAGnB,OAAO,QAAQ,UAAU,GAAI,GAAI,OAAO,SAAS,QAAQ,EAGzDZ,EAAK,MAAM,QAAU,OACrBC,EAAO,MAAM,QAAU,OACvBC,EAAW,MAAM,QAAU,MAC7B,CAGAA,EAAW,iBAAiB,QAASW,CAAQ,EAG7C,OAAO,iBAAiB,WAAY,IAAM,CAExC,MAAMC,EADY,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAC/B,IAAI,SAAS,EAEtCA,GAAchB,EAASgB,CAAU,EACnCJ,EAAYI,CAAU,EAEtBD,EAAQ,CAEZ,CAAC,EAGDR,EAAS,EAET,MAAMU,EAAY,IAAI,gBAAgB,OAAO,SAAS,MAAM,EACtDD,EAAaC,EAAU,IAAI,SAAS,EAEtCD,GAAchB,EAASgB,CAAU,EACnCJ,EAAYI,CAAU,GAGtBd,EAAK,MAAM,QAAU,OACrBC,EAAO,MAAM,QAAU,OACvBC,EAAW,MAAM,QAAU","names":["projects","__vitePreload","menu","canvas","backButton","projectList","currentDispose","buildMenu","key","project","card","e","loadProject","video","cleanCurrentProject","showMenu","projectKey","urlParams"],"ignoreList":[],"sources":["../../src/main.js"],"sourcesContent":["import './style.css'\n\nconst projects = {\n  'haunted-house': {\n    name: 'Haunted House',\n    description: 'Une maison hantée avec fantômes, ombres et brouillard',\n    image: './screen/haunted_house.png',\n    video: './screen/video/haunted_house.mp4',\n    load: () => import('./projects/haunted-house.js'),\n  },\n  particles: {\n    name: 'Particles',\n    description: 'Expérimentations avec des systèmes de particules',\n    image: './screen/particles.png',\n    video: './screen/video/particles.mp4',\n    load: () => import('./projects/particles.js'),\n  },\n  'galaxy-generator': {\n    name: 'Galaxy Generator',\n    description: 'Un générateur de galaxies avec des particules',\n    load: () => import('./projects/galaxy-generator.js'),\n  },\n}\n\n// DOM elements\nconst menu = document.getElementById('menu')\nconst canvas = document.querySelector('canvas.webgl')\nconst backButton = document.getElementById('back-button')\nconst projectList = document.getElementById('project-list')\n\n/**\n * current project dispose\n */\nlet currentDispose = null\n\n/**\n * build menu dynamically\n */\nconst buildMenu = () => {\n  projectList.innerHTML = ''\n\n  for (const [key, project] of Object.entries(projects)) {\n    const card = document.createElement('a')\n    card.href = `?project=${key}`\n    card.className = 'project-card'\n    card.addEventListener('click', (e) => {\n      e.preventDefault()\n      loadProject(key)\n    })\n\n    card.innerHTML = `\n      <div class=\"project-card-media\">\n        ${project.image ? `<img src=\"${project.image}\" alt=\"${project.name}\" />` : ''}\n        ${project.video ? `<video src=\"${project.video}\" muted loop playsinline preload=\"none\"></video>` : ''}\n      </div>\n      <div class=\"project-card-content\">\n        <h2>${project.name}</h2>\n        <p>${project.description}</p>\n      </div>\n    `\n\n    // Hover video play/pause\n    if (project.video) {\n      const video = card.querySelector('video')\n      card.addEventListener('mouseenter', () => {\n        video.currentTime = 0\n        video.play()\n      })\n      card.addEventListener('mouseleave', () => {\n        video.pause()\n      })\n    }\n\n    projectList.appendChild(card)\n  }\n}\n\nconst cleanCurrentProject = () => {\n  if (currentDispose) {\n    currentDispose()\n    currentDispose = null\n  }\n}\n\n// load project\nasync function loadProject(key) {\n  cleanCurrentProject()\n\n  // update url without reloading the page\n  window.history.pushState({}, '', `?project=${key}`)\n\n  // hide menu, show canvas and back button\n  menu.style.display = 'none'\n  canvas.style.display = 'block'\n  backButton.style.display = 'flex'\n\n  // load project module dynamically\n  const module = await projects[key].load()\n  currentDispose = module.default(canvas)\n}\n\n// back to menu\nfunction showMenu() {\n  cleanCurrentProject()\n\n  // update url without reloading the page\n  window.history.pushState({}, '', window.location.pathname)\n\n  // show menu, hide canvas and back button\n  menu.style.display = 'flex'\n  canvas.style.display = 'none'\n  backButton.style.display = 'none'\n}\n\n// events\nbackButton.addEventListener('click', showMenu)\n\n// handle back button of the browser\nwindow.addEventListener('popstate', () => {\n  const urlParams = new URLSearchParams(window.location.search)\n  const projectKey = urlParams.get('project')\n\n  if (projectKey && projects[projectKey]) {\n    loadProject(projectKey)\n  } else {\n    showMenu()\n  }\n})\n\n// initialize\nbuildMenu()\n\nconst urlParams = new URLSearchParams(window.location.search)\nconst projectKey = urlParams.get('project')\n\nif (projectKey && projects[projectKey]) {\n  loadProject(projectKey)\n} else {\n  // show menu\n  menu.style.display = 'flex'\n  canvas.style.display = 'none'\n  backButton.style.display = 'none'\n}\n"],"file":"assets/index-CHLT0LNB.js"}