import{G as T}from"./lil-gui.esm-hsJpI9MV.js";import{c as W,g as k,W as E,i as I,m as z,j as A,k as O,n as j,l as B}from"./three.module-xwh0Cw1C.js";import{O as L,T as D}from"./OrbitControls-DvPvu61S.js";function U(x){const n=new T({width:480}),r=new W,t={width:window.innerWidth,height:window.innerHeight},M=()=>{t.width=window.innerWidth,t.height=window.innerHeight,s.aspect=t.width/t.height,s.updateProjectionMatrix(),d.setSize(t.width,t.height),d.setPixelRatio(Math.min(window.devicePixelRatio,2))};window.addEventListener("resize",M);const s=new k(75,t.width/t.height,.1,100);s.position.z=5,s.position.x=7,s.position.y=5,r.add(s);const v=new L(s,x);v.enableDamping=!0;const d=new E({canvas:x});d.setSize(t.width,t.height),d.setPixelRatio(Math.min(window.devicePixelRatio,2));const e={count:1e5,size:.02,radius:5,branches:4,spin:1,randomness:.2,randomnessPower:2.5,insideColor:"#ff6030",outsideColor:"#1b3984",rotationSpeed:.1};let h,g,c;const i=()=>{c&&(h.dispose(),g.dispose(),r.remove(c)),h=new I;const a=new Float32Array(e.count*3),o=new Float32Array(e.count*3),C=new z(e.insideColor),l=new z(e.outsideColor);for(let w=0;w<e.count;w++){const m=w*3,p=Math.random()*e.radius,P=p*e.spin,y=w%e.branches/e.branches*Math.PI*2,R=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1),S=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1),G=Math.pow(Math.random(),e.randomnessPower)*(Math.random()<.5?1:-1);a[m]=Math.cos(y+P)*p+R,a[m+1]=S,a[m+2]=Math.sin(y+P)*p+G;const u=C.clone();u.lerp(l,p/e.radius),o[m]=u.r,o[m+1]=u.g,o[m+2]=u.b}h.setAttribute("position",new A(a,3)),h.setAttribute("color",new A(o,3)),g=new O({size:e.size,sizeAttenuation:!0,depthWrite:!1,blending:j,vertexColors:!0}),c=new B(h,g),r.add(c)};i(),n.add(e,"count").min(100).max(1e6).step(100).onFinishChange(i),n.add(e,"size").min(.001).max(.1).step(.001).onFinishChange(i),n.add(e,"radius").min(.01).max(20).step(.01).onFinishChange(i),n.add(e,"branches").min(2).max(20).step(1).onFinishChange(i),n.add(e,"spin").min(-5).max(5).step(.001).onFinishChange(i),n.add(e,"randomness").min(0).max(2).step(.001).onFinishChange(i),n.add(e,"randomnessPower").min(1).max(10).step(.001).onFinishChange(i),n.addColor(e,"insideColor").onFinishChange(i),n.addColor(e,"outsideColor").onFinishChange(i),n.add(e,"rotationSpeed").min(0).max(1).step(.001).name("Rotation Speed");const b=new D;let f=null;console.log("------------------START-------------------"),console.log(r),console.log("--------------------END-------------------");const F=()=>{b.update();const a=b.getElapsed();c.rotation.y=a*e.rotationSpeed,d.render(r,s),f=window.requestAnimationFrame(F)};return F(),function(){f&&window.cancelAnimationFrame(f),window.removeEventListener("resize",M),n.destroy(),d.dispose(),r.traverse(o=>{if(o.isMesh&&(o.geometry.dispose(),o.material.isMaterial)){for(const C of Object.keys(o.material)){const l=o.material[C];l&&typeof l.dispose=="function"&&l.dispose()}o.material.dispose()}})}}export{U as default};
//# sourceMappingURL=galaxy-generator-CKPV4cqn.js.map
