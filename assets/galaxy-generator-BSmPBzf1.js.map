{"version":3,"file":"galaxy-generator-BSmPBzf1.js","sources":["../../src/projects/galaxy-generator.js"],"sourcesContent":["import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport { Timer } from 'three/addons/misc/Timer.js'\n\nexport default function galaxyGenerator(canvas) {\n  /**\n   * Scene\n   */\n  const scene = new THREE.Scene()\n\n  /**\n   * Sizes\n   */\n  const sizes = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  }\n\n  const onResize = () => {\n    sizes.width = window.innerWidth\n    sizes.height = window.innerHeight\n\n    camera.aspect = sizes.width / sizes.height\n    camera.updateProjectionMatrix()\n\n    renderer.setSize(sizes.width, sizes.height)\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n  }\n\n  window.addEventListener('resize', onResize)\n\n  /**\n   * Camera\n   */\n  const camera = new THREE.PerspectiveCamera(\n    75,\n    sizes.width / sizes.height,\n    0.1,\n    100\n  )\n  camera.position.z = 3\n  scene.add(camera)\n\n  /**\n   * Controls\n   */\n  const controls = new OrbitControls(camera, canvas)\n  controls.enableDamping = true\n\n  /**\n   * Renderer\n   */\n  const renderer = new THREE.WebGLRenderer({ canvas })\n  renderer.setSize(sizes.width, sizes.height)\n  renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))\n\n  /**\n   * TODO: Ajoute ton code galaxy generator ici\n   */\n\n  /**\n   * Animate\n   */\n  const timer = new Timer()\n  let animationFrameId = null\n\n  const tick = () => {\n    timer.update()\n    const elapsedTime = timer.getElapsed()\n\n    controls.update()\n    renderer.render(scene, camera)\n\n    animationFrameId = window.requestAnimationFrame(tick)\n  }\n\n  tick()\n\n  /**\n   * Cleanup\n   */\n  return function dispose() {\n    if (animationFrameId) {\n      window.cancelAnimationFrame(animationFrameId)\n    }\n    window.removeEventListener('resize', onResize)\n    renderer.dispose()\n    scene.traverse((child) => {\n      if (child.isMesh) {\n        child.geometry.dispose()\n        if (child.material.isMaterial) {\n          for (const key of Object.keys(child.material)) {\n            const value = child.material[key]\n            if (value && typeof value.dispose === 'function') {\n              value.dispose()\n            }\n          }\n          child.material.dispose()\n        }\n      }\n    })\n  }\n}\n"],"names":["galaxyGenerator","canvas","scene","THREE.Scene","sizes","onResize","camera","renderer","THREE.PerspectiveCamera","controls","OrbitControls","THREE.WebGLRenderer","timer","Timer","animationFrameId","tick","child","key","value"],"mappings":"4EAIe,SAASA,EAAgBC,EAAQ,CAI9C,MAAMC,EAAQ,IAAIC,EAKZC,EAAQ,CACZ,MAAO,OAAO,WACd,OAAQ,OAAO,WACnB,EAEQC,EAAW,IAAM,CACrBD,EAAM,MAAQ,OAAO,WACrBA,EAAM,OAAS,OAAO,YAEtBE,EAAO,OAASF,EAAM,MAAQA,EAAM,OACpCE,EAAO,uBAAsB,EAE7BC,EAAS,QAAQH,EAAM,MAAOA,EAAM,MAAM,EAC1CG,EAAS,cAAc,KAAK,IAAI,OAAO,iBAAkB,CAAC,CAAC,CAC7D,EAEA,OAAO,iBAAiB,SAAUF,CAAQ,EAK1C,MAAMC,EAAS,IAAIE,EACjB,GACAJ,EAAM,MAAQA,EAAM,OACpB,GACA,GACJ,EACEE,EAAO,SAAS,EAAI,EACpBJ,EAAM,IAAII,CAAM,EAKhB,MAAMG,EAAW,IAAIC,EAAcJ,EAAQL,CAAM,EACjDQ,EAAS,cAAgB,GAKzB,MAAMF,EAAW,IAAII,EAAoB,CAAE,OAAAV,CAAM,CAAE,EACnDM,EAAS,QAAQH,EAAM,MAAOA,EAAM,MAAM,EAC1CG,EAAS,cAAc,KAAK,IAAI,OAAO,iBAAkB,CAAC,CAAC,EAS3D,MAAMK,EAAQ,IAAIC,EAClB,IAAIC,EAAmB,KAEvB,MAAMC,EAAO,IAAM,CACjBH,EAAM,OAAM,EACQA,EAAM,WAAU,EAEpCH,EAAS,OAAM,EACfF,EAAS,OAAOL,EAAOI,CAAM,EAE7BQ,EAAmB,OAAO,sBAAsBC,CAAI,CACtD,EAEA,OAAAA,EAAI,EAKG,UAAmB,CACpBD,GACF,OAAO,qBAAqBA,CAAgB,EAE9C,OAAO,oBAAoB,SAAUT,CAAQ,EAC7CE,EAAS,QAAO,EAChBL,EAAM,SAAUc,GAAU,CACxB,GAAIA,EAAM,SACRA,EAAM,SAAS,QAAO,EAClBA,EAAM,SAAS,YAAY,CAC7B,UAAWC,KAAO,OAAO,KAAKD,EAAM,QAAQ,EAAG,CAC7C,MAAME,EAAQF,EAAM,SAASC,CAAG,EAC5BC,GAAS,OAAOA,EAAM,SAAY,YACpCA,EAAM,QAAO,CAEjB,CACAF,EAAM,SAAS,QAAO,CACxB,CAEJ,CAAC,CACH,CACF"}